[general]
static=yes
writeprotect=no

[globals]
RECORDING_DIR=/var/spool/asterisk/monitor

[from-internal]
; Echo test - dial 600 to test audio
exten => 600,1,Answer()
 same => n,Playback(demo-echotest)
 same => n,Echo()
 same => n,Hangup()

; Agent extensions (1001-1004)
exten => 1001,1,NoOp(Calling Agent 001)
 same => n,Dial(PJSIP/agent001,30,tT)
 same => n,Hangup()

exten => 1002,1,NoOp(Calling Alex Agent - ext 1002)
 same => n,Dial(PJSIP/alexagent0003,30,tT)
 same => n,Hangup()

exten => 1003,1,NoOp(Calling Agent 003)
 same => n,Dial(PJSIP/agent003,30,tT)
 same => n,Hangup()

exten => 1004,1,NoOp(Calling Agent 004)
 same => n,Dial(PJSIP/agent004,30,tT)
 same => n,Hangup()

; Main call flow entry - routes through ARI/Stasis for dynamic control
exten => 700,1,NoOp(Entering ARI Stasis app callcenter)
 same => n,Stasis(callcenter)
 same => n,Hangup()

; Queue-style routing - finds first available agent
exten => 800,1,NoOp(Queue routing to available agent)
 same => n,Answer()
 same => n,Playback(pls-hold-while-try)
 same => n,Dial(PJSIP/alexagent0003&PJSIP/agent001&PJSIP/agent003&PJSIP/agent004,60,tT)
 same => n,Playback(vm-nobodyavail)
 same => n,Hangup()

; Transfer extensions
exten => *1,1,NoOp(Blind transfer)
 same => n,Blind-Transfer()

; Internal call between agents pattern
exten => _100X,1,NoOp(Internal call to agent ${EXTEN})
 same => n,Set(AGENT=agent00${EXTEN:3:1})
 same => n,Dial(PJSIP/${AGENT},30,tT)
 same => n,Hangup()

; Example recording on any outbound call
; exten => _9X.,1,Answer()
;  same => n,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-${CALLERID(num)}-${EXTEN})
;  same => n,MixMonitor(${FILENAME}.wav,ab)
;  same => n,Dial(PJSIP/${EXTEN:1})
;  same => n,StopMixMonitor()
;  same => n,Hangup()
